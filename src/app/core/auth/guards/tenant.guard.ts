import { Inject, Injectable, NgZone } from '@angular/core';
import { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';
import { Observable, catchError, map, of, tap } from 'rxjs';
import { AuthService } from '../auth.service';
import { tenantDetails } from 'app/core/tenantModels';
import { helperService } from '../helper';
import { DOCUMENT } from '@angular/common';
import { environment } from 'environments/environment';
import { appConfig } from '../app.configs';
import { CommanService } from 'app/modules/common/comman.service';
@Injectable({
  providedIn: 'root'
})
export class tenantGuard implements CanActivate {
  tenantDetails: any;
  domainName: any;
  _env: any;
  keyName = appConfig.localStorageName.TenantInfoStorageName;
  private secretKey = this._encryptionService.getSecretKey();
  constructor(private authservice: AuthService, private route: Router, private _encryptionService: helperService, private _commanService: CommanService, @Inject(DOCUMENT) private document: Document,private _ngZone:NgZone) {
    this.domainName = this.document.location.hostname;
  
    var self = this;
    self._env = environment;
  }

  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {
    return this.tenantValidate().pipe(
      tap((isValid) => {
        if (!isValid) {
          this._ngZone.run(() => {
            this.route.navigate(['tenant-not-found']);
          });
        }
      })
    );
  }

  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {
    return this.tenantValidate().pipe(
      tap((isValid) => {
        if (!isValid) {
          this._ngZone.run(() => {
            this.route.navigate(['tenant-not-found']);
          });
        }
      })
    );
  }

  tenantValidate(): Observable<boolean> {
    let tenantData = localStorage.getItem(this.keyName);

   if(localStorage.getItem("tenantInfoRemoved")!="true")
    {
      tenantData=null;
      localStorage.setItem('tenantInfoRemoved', 'true');
    }
    
    if (tenantData == null) {
      return this.authservice.GetTinatDetail(this._env.tenantname).pipe(
        map((res: any) => {
          this.tenantDetails = {
            "SubDomain": "careNext",
            "FirstName": "careNext",
            "LastName": "careNext",
            "FullName": null,
            "CollegeName": "careNext",
            "Email": "careNext@gmail.com",
            "Banner1": null,
            "PostBanner1": null,
            "Banner2": null,
            "PostBanner2": null,
            "StateId": 23,
            "Logo": "iVBORw0KGgoAAAANSUhEUgAAAGQAAABJCAYAAADL0IO8AAAACXBIWXMAAAsTAAALEwEAmpwYAAA/TmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDIyLTAxLTEwVDEwOjAwOjIyKzA1OjMwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAyMi0wMS0xMFQxMDowMDozOCswNTozMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMjItMDEtMTBUMTA6MDA6MzgrMDU6MzA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjg0M2E2N2U1LTU0YzMtOGY0Yy1iODk0LWI0NjM1NTg4YWY4ZjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBjMjgxNzQ3LTcxY2UtMTFlYy04MTBlLTlhZTMxYTNmNmI2YTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjZhMTQ3YzNlLTk3YjAtOTU0MC1iMDMyLWEyZjBiNzViMmU5NzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNyZWF0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo2YTE0N2MzZS05N2IwLTk1NDAtYjAzMi1hMmYwYjc1YjJlOTc8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMjItMDEtMTBUMTA6MDA6MjIrMDU6MzA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6ZjYzZmZlNTItYjU2Ni0wYTQyLWI3NWQtNDZhYzJhMTdhZDMwPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDIyLTAxLTEwVDEwOjAwOjM4KzA1OjMwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjg0M2E2N2U1LTU0YzMtOGY0Yy1iODk0LWI0NjM1NTg4YWY4Zjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAyMi0wMS0xMFQxMDowMDozOCswNTozMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXBNTTpEZXJpdmVkRnJvbSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgIDxzdFJlZjppbnN0YW5jZUlEPnhtcC5paWQ6ZjYzZmZlNTItYjU2Ni0wYTQyLWI3NWQtNDZhYzJhMTdhZDMwPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjZhMTQ3YzNlLTk3YjAtOTU0MC1iMDMyLWEyZjBiNzViMmU5Nzwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjZhMTQ3YzNlLTk3YjAtOTU0MC1iMDMyLWEyZjBiNzViMmU5Nzwvc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTAwPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjczPC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg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",
            "PostLogo": null,
            "Slogan": "careNext",
            "SupportEmail": "careNext@gmail.com",
            "SupportPhoneNumber": "11111111111111",
            "SubscriptionStartOn": "2024-06-11T06:48:15Z",
            "SubscriptionRenewedAt": null,
            "SubscriptionExpiredOn": "2028-11-11T06:48:15Z",
            "ThemeID": "theme-Mrb",
            "SubscriptionStatus": 0,
            "SchemaID": "Light",
            "CurrentPlan": "1 Year Subscription",
            "PlanID": null,
            "PreviousPlan": null,
            "ApiKey": "c-PgKsQVjMFvUM9YHtcdluQ2DrKeycG6aDUbY1gu5BY0=",
            "Password": null,
            "RefTenantId": null,
            "Id": "8932d354-1dd2-4ace-81ed-25d9809d9f86",
            "CreatedOn": 1737694275,
            "UpdatedOn": 1718088494,
            "CreatedBy": null,
            "UpdatedBy": null,
            "Active": true,
            "Deleted": false,
            "OrderNo": 0
        };
          const encryptedtenantDetails = this._encryptionService.encryptObject(this.tenantDetails, this.secretKey);
          localStorage.setItem(this.keyName, encryptedtenantDetails);
          return this.validateTenantInfo(this.tenantDetails);
        }),
        catchError((error) => {
          if (error.status === 404) {
            this.tenantDetails = new tenantDetails({});
            const encryptedtenantDetails = this._encryptionService.encryptObject(this.tenantDetails, this.secretKey);
            localStorage.setItem(this.keyName, encryptedtenantDetails);
            return of(this.validateTenantInfo(this.tenantDetails));
          } else {
            // Handle other errors if needed
            return of(false);
          }
        })
      );
    } else {
      const decryptedData = this._encryptionService.decryptObject(tenantData, this.secretKey);
      return of(this.validateTenantInfo(decryptedData));
    }
  }

  validateTenantInfo(tenantData: any): boolean {
    this._commanService.getTenantDetails?.next(tenantData);
    try {
      if (tenantData?.SubscriptionStatus === 0) {
        return true;
      } else {
        this._commanService.getTenantDetails.next(new tenantDetails({}));
        return false;
      }
    } catch (error) {
      return false;
    }
  }
}



